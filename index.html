<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="initial-scale=1" />
  <meta name="description" content="Contact form for Xopero">
  <link rel="stylesheet" href="styles/output.css" />
  <title>Contact With Us</title>
</head>
<body>
<div class="flex flex-col gap-5 w-full min-h-screen h-full items-center justify-center p-5 bg-[url('/styles/bg.webp')] bg-cover bg-center">

<header class="lg:w-[500px] flex flex-col gap-3 items-center justify-center bg-slate-800 p-5 rounded-md">
  <h1 class="text-white text-3xl text-center">Contact with us</h1>
  <p class="text-white text-center">Fill out the form – we will respond as soon as possible.</p>
</header>

<main class="flex flex-col gap-3 items-center justify-center bg-slate-800 py-5 px-10 rounded-md">
  <form id="contactForm" method="POST" class="flex flex-col items-start gap-5">
    <div class="flex flex-col gap-2">
      <label for="name" class="text-white opacity-75 font-semibold text-sm">Name:</label>
      <input type="text" id="name" name="name" class="text-white px-3 py-1.5 border border-white/20 rounded-md" placeholder="John" required />
    </div>
    <div class="flex flex-col gap-2">
      <label for="email" class="text-white opacity-75 font-semibold text-sm">Email</label>
      <input type="email" id="email" name="email" class="text-white px-3 py-1.5 border border-white/20 rounded-md" placeholder="john@example.com" required />
    </div>
    <div class="flex flex-col gap-2">
      <label for="message" class="text-white opacity-75 font-semibold text-sm">Message</label>
      <textarea id="message" name="message" rows="1" class="text-white px-3 py-1.5 border border-white/20 rounded-md" placeholder="Message..." required></textarea>
    </div>
    <button type="submit" class="bg-green-700 text-white px-3 py-1.5 rounded-md font-medium cursor-pointer hover:scale-90 transition-transform">Send</button>
  </form>
  <div id="responseMsg"></div>
</main>
</div>
</body>

<script>
  const form = document.getElementById('contactForm');
  const resp = document.getElementById('responseMsg');

  const setMsg = (t, ok=true) => {
    resp.textContent = t;
    resp.className = ok ? 'text-green-400' : 'text-red-400';
  };

  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    setMsg('Submitting…', true);

    const fd = new FormData(form);
    const payload = Object.fromEntries(fd.entries());

    try {
      const r = await fetch('contact.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload)
      });
      const data = await r.json();
      if (data?.status === 'success') {
        setMsg('Thank you! Your message has been sent.');
        form.reset();
      } else {
        setMsg(data?.message || 'Error occurred', false);
      }
    } catch {
      setMsg('Error occurred', false);
    }
  });
</script>
</html>
